#!/usr/bin/env ruby
# encoding: utf-8

require 'update_draft_release'

if ARGV.empty? || ARGV[0].empty?
  puts 'Missing: repository name'
  exit
end

repo = 'why_you_no_repo'
options = {}

# Acceptable options:
#
# --at-the-end
# --before-gamma
# --open-url
#
ARGV.each do |arg|
  case
  when arg.match(/^--in-[A-z-]+$/)
    options[:insert_into] = arg[5..-1]
  when arg == '--open-url'
    options[:open_url_after_update] = true
  when arg == '--at-the-end'
    options[:insert_at_the_end] = true
  when arg == '--create-heading'
    options[:create_heading] = true
  when arg == '--skip-confirmation'
    options[:skip_confirmation] = true
  else
    repo = arg
  end
end

runner = UpdateDraftRelease::Runner.new(repo, options)
runner.update_draft_release
